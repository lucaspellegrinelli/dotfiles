# run 'nvim .' if no file/directory is specified
function nvim() {
    if [ $# -eq 0 ]; then
        command nvim .
    else
        command nvim "$@"
    fi
}

# why vim when you can nvim?
alias vim=nvim

# cd into projects
function cdp() {
    cd "$(find ~/projects -mindepth 1 -maxdepth 1 -type d | fzf)"
}

zle -N cdp

# -------------- PYTHON / MINICONDA CONFIGURATIION --------------
# Blocks pip in conda base env
chmod -w ~/.local/lib/python*
chmod -w /opt/miniconda/lib/python*/site-packages

# Prevents "conda install" in base envirorment
function extended_conda(){
  if [ "${CONDA_PROMPT_MODIFIER-}" = "(base) " ] && [ "$1" = "install" ]; then
    echo "Not allowed in base"
  else
    conda "$@"
  fi
}

alias conda=extended_conda

# Creates the command 'fpip' to bypass the block
function fpip() {
    chmod +w ~/miniconda3/lib/python*/site-packages
    pip "$@"
    chmod -w ~/miniconda3/lib/python*/site-packages
}

zle -N fpip
